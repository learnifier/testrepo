[#ftl strip_text="true" /]

[#import "bounceInfo.html" as bInfoRender /]
[#import "projectInfo.html" as pInfo /]
[#import "projectRegistration.html" as pRegistration /]

[#assign foot]



${cpweb_foot}



<script id="roster-expand-template" type="text/x-handlebars-template">
    
<div style="margin-left:20px;">
{{#pages}}
  <h1 style="display:inline-block;">{{title}}</h1> <p class="showDrop"><span class="showOverview">Overview</span> | <span class="showDetails">Show details</span></p>
  <table class="table table-hover ccb-table dt-responsive ToggleDrop" width="100%" id="projectroster">
  <tbody>
  {{#activity}}
  <tr class="">
  <td><p class="dropdownTitle truncate">{{title}}</p> <p class="dropdownTitle truncate titleCompleted">{{StatusName activityStatus}}</p></td>
  </tr>
     {{#component}}
     <tr class="hide white">
     <td class="ptb0" colspan="8" style="padding-left:20px !important;">
     <div style="padding-left: 20px;">
     
     
       
        <ul class="dropdownUl">
         <li class="dropdownLi1"><img src="{{thumbnail}}" style="height: 20px; width:20px;"></li>
         <li class="dropdownLi2"><p class="truncate">{{componentTitle}}</p></li>

          {{#if completedDate}} 
        <li class="dropdownLi3"><p><abbr data-toggle="tooltip" class="timeago" title="{{completedDateAgo}}"> {{completedDateStr}} </abbr></p></li>
        {{else}}
        <li class="dropdownLi3"><p></p></li>
          {{/if}}

         {{#if scoreStr}}
        <li class="dropdownLi4"><p>{{scoreStr}}</p></li>
        {{else}}
        <li class="dropdownLi4"><p></p></li>
        {{/if}}
                 
      <li class="dropdownLi6"><p>{{StatusName componentStatus}}</p></li>
       
       <ul>
       
       <li class="dropdownLi5"><p>{{StatusImage componentStatus}}</p></li>
       
       <ul>
       
     </div>
     </td>
     </tr>
   {{/component}}
  
  {{/activity}}
  </tbody>
  </table>  
{{/pages}}
</div>

</script>

<script>
    $(document).ready(function () {
        require(['cocobox-handlebars', 'jquery.timeago', 'cocobox-icheck'], function (hb) {

            hb.registerHelper('StatusName', function (activityStatus) {


                if (activityStatus == 'notAttempted') {
                    return 'Not started';
                } else if (activityStatus == 'incomplete') {
                    return 'In progress';
                } else if (activityStatus == 'overdue') {
                    return 'Overdue';
                } else if (activityStatus == 'locked') {
                    return 'Locked';
                } else if (activityStatus == 'failed') {
                    return 'Failed';
                } else if (activityStatus == 'completed') {
                    return 'Completed';
                } else {
                    return 'Unknown statusName:' + activityStatus;
                }



            });


            hb.registerHelper('StatusImage', function (activityStatus) {

                if (activityStatus == 'notAttempted') {
                    var result = '<span class="item__icon pe-7s-config pe-va pe-2x pe-fw"></span>';
                    return new hb.SafeString(result);
                } else if (activityStatus == 'incomplete') {
                    var result = '<span class="item__icon pe-7s-config pe-va pe-2x pe-fw"></span>';
                    return new hb.SafeString(result);
                } else if (activityStatus == 'overdue') {
                    var result = '<span class="item__icon pe-7s-config pe-va pe-2x pe-fw"></span>';
                    return new hb.SafeString(result);
                } else if (activityStatus == 'locked') {
                    var result = '<span class="item__icon pe-7s-config pe-va pe-2x pe-fw"></span>';
                    return new hb.SafeString(result);
                } else if (activityStatus == 'failed') {
                    var result = '<span class="item__icon pe-7s-config pe-va pe-2x pe-fw"></span>';
                    return new hb.SafeString(result);
                } else if (activityStatus == 'completed') {
                    var result = '<span class="item__icon pe-7s-config pe-va pe-2x pe-fw"></span>';
                    return new hb.SafeString(result);
                } else {
                    return 'Unknown statusImage:' + activityStatus;
                }

            });

            var templateSource = $("#roster-expand-template").html();
            var template = hb.compile(templateSource);
            var resultsPlaceholder = $("#progressTemplate");

            $.ajax({
                url: "http://kt.dabox.se:9000/cpweb/project.jspart/participationDetails/1239",
                success: function (response) {
                    resultsPlaceholder.html(template(response));
                    $('.timeago', resultsPlaceholder).timeago();

                    //Show dropdown
                    $(".showDetails").click(function () {
                        $('.ToggleDrop').addClass("greyish");
                        $('.hide').addClass("tbRow");
                    });
                    
                    //Hide dropdown
                    $(".showOverview").click(function () {
                        $('.ToggleDrop').removeClass("greyish");
                        $('.hide').removeClass("tbRow");
                    });
                    
                    
                }
            });





        });
    });
</script>


[/#assign]

[#assign cpweb_head]
${cpweb_head}
[/#assign]

[@dws.skin skin="CPAuth3" head=cpweb_head ctxMenu=cpweb_ctxMenu foot=foot orgName=orgName]


<div id="template-container">






</div>


[/@dws.skin]

