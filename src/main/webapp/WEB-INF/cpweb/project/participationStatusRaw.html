[#ftl strip_text="true" /]

[#import "projectInfo.html" as pInfo /]

[#assign cpweb_foot ]
${cpweb_foot}
[/#assign]

[@dws.skin skin="CPAuth3" head=cpweb_head ctxMenu=cpweb_ctxMenu foot=cpweb_foot orgName=orgName]

[@pInfo.projectInfo selected="other"][/@pInfo.projectInfo]

<h2>Raw status</h2>

[#list actCourse.pageList as page]

<h3>Page ${page_index} (enabled: ${page.enabled?c})</h3>

<p>Title: ${(page.title?xhtml)!''}</p>
<p>Text: ${(page.text?xhtml)!''}</p>

    [#list page.activityList as act]
        <h4>Activity ${act.index}</h4>
        <p>Container type: ${(act.activityContainerType?xhtml)!''}</p>
        <p>Enabled: ${(act.enabled?c)!''}</p>
        <p>Completed: ${(act.completed?c)!''}</p>
        <p>Visible: ${(act.visible?c)!''}</p>
        <p>Overdue: ${(act.overdue?c)!''}</p>
        <p>Success: ${(act.successStatus)!''}</p>
        <p>Tracking type: ${(act.progressTrackingType)!''}</p>

        <h5>Primary component</h5>
        [#if (act.primaryComponent??)]
          [@dumpComponent act.primaryComponent /]
        [/#if]

        <h5>Secondary components</h5>
        <ul>
            [#list act.secondaryComponents as comp]
                <li>[@dumpComponent comp /]</li>
            [/#list]
        </ul>

        <h5>Side component</h5>
        [#if (comp.sideComponent)?? ]
          [@dumpComponent comp=act.sideComponent /]
        [/#if]

    [/#list]


[/#list]


<h2>Raw state</h2>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th  style="padding-left: 20px">Value</th>
            </tr>
        </thead>
        <tbody>
            [#list participantState.map?keys?sort as key]
            <tr>
                <td>
                    ${key?xml}
                </td>
                <td style="padding-left: 20px">
                    ${(participantState.map[key]?xml)!'(No value set)'}
                </td>
            </tr>
            [/#list]
        </tbody>
    </table>


[/@dws.skin]

[#macro dumpComponent comp]
    [#if !comp??]
        (None)
        [#return /]
    [/#if]

    type=${comp.type}, cid=${comp.cid}, completed=${comp.completed?c}, tracking=${comp.progressTrackingType}, due=${comp.dueDateInfo}, title=${(comp.properties.title?xhtml)!''}
[/#macro]
