[#ftl strip_text="true" /]


[#assign foot]
${cpweb_foot}
<script>
    $('#tm_projects').addClass('activeItem').prev().addClass('prevItem');
</script>
<script>
    var addFavorite = "${helper.urlFor('favorites.FavoritesJsonModule','add')}";
    var deleteFavorite = "${helper.urlFor('favorites.FavoritesJsonModule','delete')}";
    var spinnerUrl = "${contextPath}/img/spinner-threedots.gif";
    var newProjectUrl = "${helper.urlFor('project.NewProjectModule','setup',[org.id])}";
    var listProjectsAjaxSource = "${helper.urlFor('CpJsonModule','listOrgProjects',[org.id])}?type=${projectStatus}";

    require(["${contextPath}/js/project/listProjects.js?${cycle.application.formattedStartTime.base36String}"], function(s) {
       //No initialization needed
    });

</script>

[/#assign]

[@dws.skin skin="CPAuth2" head=cpweb_head foot=foot orgName=orgName]

[@portalSecurity.permissionBlock permission="CP_CREATE_PROJECT"]
<a href="${helper.urlFor('project.NewProjectModule','setup',[org.id])}" class="btn btn-add navBackgroundColor">Add Project</a>
[/@]

<h1>Projects</h1>
<section class="list">

    <a class="${(projectStatus == 'NEW')?string('selected','')}" href="${helper.urlFor('CpMainModule','listProjects',[org.id])}?type=NEW">${ctext("project.status.NEW")?xml}</a> |
    <a class="${(projectStatus == 'ACTIVE')?string('selected','')}" href="${helper.urlFor('CpMainModule','listProjects',[org.id])}?type=ACTIVE">${ctext("project.status.ACTIVE")?xml}</a> |
    <a class="${(projectStatus == 'DISABLED')?string('selected','')}" href="${helper.urlFor('CpMainModule','listProjects',[org.id])}?type=DISABLED">${ctext("project.status.DISABLED")?xml}</a>


    <table class="list" id="listprojects">
        <thead>
            <tr>
                <th></th>
                <th>Project Name</th>
                <th># Added</th>
                <th># Invited</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</section>


[/@dws.skin]

