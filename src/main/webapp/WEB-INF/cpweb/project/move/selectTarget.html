[#ftl strip_text="true" /]

[#assign cpweb_foot]
${cpweb_foot}

<script id="list-item-template" type="text/x-handlebars-template">
    <a href="#" class="list-group-item">
        <h4 class="list-group-item-heading">{{name}}</h4>
    </a>
</script>

<script>
    var projectList = "${cycle.urlFor('CpJsonModule','listOrgProjects',[org.id?c])}";

    require(['handlebars'], function (Handlebars) {
        $.get(projectList)
                .always(function () {
                    $("#spinnerbox").hide();
                })
                .done(function (data) {
                    var tmpl = Handlebars.compile($("#list-item-template").html());

                    var html = $.map(data.aaData, function(obj) {
                        return tmpl(obj);
                    });

                    $("#projectLg").append(html);
                })
                .fail(function () {
                    $("#ajaxErrorBox").toggleClass("hidden");
                });
    });

</script>

[/#assign]

[@dws.skin skin="barebone_bootstrap" head=cpweb_head foot=cpweb_foot]

<div class="container">
    <h1>Select target project</h1>
    <p class="center" id="spinnerbox">[@common.spinner /]</p>
    <div class="alert alert-danger hidden" role="alert" id="ajaxErrorBox">Failed to get data from the server. Please try again later.</div>
</div>

<div class="container">
    <div id="projectLg" class="list-group">

    </div>
</div>

[/@dws.skin]
