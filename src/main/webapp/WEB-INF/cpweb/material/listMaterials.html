[#ftl strip_text="true" /]

[#import "addAnonProduct.ftl" as addAnonProd /]

[#assign cpweb_head]
    ${cpweb_head}
[/#assign]

[#assign pagetitle='listMaterials' /]

[#assign foot]
${cpweb_foot}

<script>
    $('#menu-library').addClass('subMenuExpanded');
    $('#menu-library-materials').addClass('active');

    window.cocoboxCdn = "${cocoboxCdn}";
    require(["${contextPath}/js/material/listMaterialsFolder.js?${cycle.application.formattedStartTime.base36String}"], function(s) {
        s.init({
            listUrl: "${helper.urlFor('OrgMaterialJsonModule','listMats',[org.id])}",
            moveToFolderUrl: "${helper.urlFor('OrgMaterialJsonModule','moveToFolder',[org.id])}",
            createFolderUrl: "${helper.urlFor('OrgMaterialJsonModule','createFolder',[org.id])}",
            removeFoldersItemsUrl: "${helper.urlFor('OrgMaterialJsonModule','removeFoldersItems',[org.id])}",
            renameFolderUrl: "${helper.urlFor('OrgMaterialJsonModule','renameFolder',[org.id])}",
            renameItemUrl: "${helper.urlFor('OrgMaterialJsonModule','renameItem',[org.id])}",
            editOrgMatUrl: "${helper.urlFor('material.MaterialModule','edit',[org.id])}",
            iframeLabUrl: "${helper.urlFor('material.MaterialModule', 'iframeLab',[org.id])}",
            editMode: true // TODO: Check permissions here.
        });
    });

</script>

[@addAnonProd.addScript /]
[/#assign]

[@dws.skin skin="CPAuth3" head=cpweb_head foot=foot orgName=orgName]

<section class="ccb-page-header margin-bottom">
    <div class="ccb-page-header__actions--right">
        [@addAnonProd.addButton /]
    </div>
    <div class="add-material-ng btn btn-primary"><span class="glyphicon glyphicon-plus-sign"></span> Add Material NG</div>
    <h1 class="page-title">Materials</h1>
</section>

<div data-bind="component: { name: 'cocobox-list', params: cocoboxListParams()}"></div>

<iframe width="100%" style="background: #ffffff; opacity:1.0;z-index:10000;color:#000000;display: none;height: 100%;position:fixed; top:0px; left:0px; bottom:0px; right:0px;" id="iframeLab"></iframe>

[/@dws.skin]
