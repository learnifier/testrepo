[#ftl strip_text="true" /]

[#import "addAnonProduct.ftl" as addAnonProd /]

[#assign cpweb_head]
    ${cpweb_head}
[/#assign]

[#assign pagetitle='listMaterials' /]

[#assign foot]
${cpweb_foot}

<script>
    $('#menu-library').addClass('subMenuExpanded');
    $('#menu-library-materials').addClass('active');

    $(function () {
      $('[data-toggle="tooltip"]').tooltip()
    })


    window.cocoboxCdn = "${cocoboxCdn}";
    require(["${contextPath}/js/material/listMaterialsFolder.js?${cycle.application.formattedStartTime.base36String}", "../cocobox/vfs/vfs"], function(s, vfsModule) {
        var vfs = new vfsModule.VFS("${helper.urlFor('material.LibraryVfsModule','vfs',[org.id])}");
        s.init({
            vfs: vfs,
            listUrl: "${helper.urlFor('OrgMaterialJsonModule','listMats',[org.id])}",
            moveToFolderUrl: "${helper.urlFor('OrgMaterialJsonModule','moveToFolder',[org.id])}",
            createFolderUrl: "${helper.urlFor('OrgMaterialJsonModule','createFolder',[org.id])}",
            removeFoldersItemsUrl: "${helper.urlFor('OrgMaterialJsonModule','removeFoldersItems',[org.id])}",
            renameFolderUrl: "${helper.urlFor('OrgMaterialJsonModule','renameFolder',[org.id])}",
            renameItemUrl: "${helper.urlFor('OrgMaterialJsonModule','renameItem',[org.id])}",
            editOrgMatUrl: "${helper.urlFor('material.MaterialModule','edit',[org.id])}",
            addProductUrl: "${dwsrt.config['pdweb-folders.baseurl']}aprodnew/createProduct?scope=O${org.id?c}",
            editMode: true // TODO: Check permissions here.
        });
    });

</script>

[@addAnonProd.addScript /]
[/#assign]

[@dws.skin skin="CPAuth3" head=cpweb_head foot=foot orgName=orgName]

<section class="ccb-page-header margin-bottom">
    <div class="ccb-page-header__actions--right">
        [#if portalSecurity.hasPermission("CP_CREATE_ORGMAT")]
        <div class="btn btn-primary" data-bind="click: addFolder"><span class="glyphicon glyphicon-plus-sign"></span> Add Folder</div>
        <div class="btn-group">
          <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="glyphicon glyphicon-plus-sign"></i> Add Content <span class="caret"></span>
          </button>
          <ul class="dropdown-menu dropdown-menu-right" style="min-width: 300px;">
            <li><h4 class="text-center primaryColor">UPLOAD</h4></li>
            [#if productTypes['audiofile']??]
              <li data-bind="click: function(){addMaterial(['upload-audio']);}"><a href="#"><i class="pe-7s-volume pe-va pe-2x pe-fw"></i> Audio</a></li>
            [/#if]
            [#if productTypes['file']??]
              <li data-bind="click: function(){addMaterial(['upload-file']);}"><a href="#"><i class="pe-7s-news-paper pe-va pe-2x pe-fw"></i> Document</a></li>
            [/#if]
            [#if productTypes['image']??]
              <li data-bind="click: function(){addMaterial(['upload-image']);}"><a href="#"><i class="pe-7s-photo pe-va pe-2x pe-fw"></i> Image</a></li>
            [/#if]
            [#if productTypes['scorm']??]
              <li data-bind="click: function(){addMaterial(['upload-scorm']);}"><a href="#"><i class="pe-7s-monitor pe-va pe-2x pe-fw"></i> Scorm (AICC/Tin Can)</a></li>
            [/#if]
            [#if productTypes['videofile']??]
            <li data-bind="click: function(){addMaterial(['upload-video']);}"><a href="#"><i class="pe-7s-video pe-va pe-2x pe-fw"></i> Video</a></li>
            [/#if]
            <li data-bind="click: function(){addMaterial(['upload-generic']);}" class="text-center" data-toggle="tooltip" data-placement="bottom" title="Upload different file types together at once"><a href="#"><small><em><i class="pe-7s-rocket pe-va pe-lg pe-fw primaryColor"></i> Quick upload...</small></em></a></li>
            <li role="separator" class="divider"></li>
            <li><h4 class="text-center primaryColor">CREATE</h4></li>
            <li data-bind="click: function(){addMaterial(['create-text']);}"><a href="#"><i class="pe-7s-note pe-va pe-2x pe-fw"></i> Text/HTML</a></li>
            [#if productTypes['scorequiz']??]
              <li data-bind="click: function(){addMaterial(['create-survey']);}"><a href="#"><i class="pe-7s-help1 pe-va pe-2x pe-fw"></i> Survey</a></li>
            [/#if]
            [#if productTypes['quiz']??]
              <li data-bind="click: function(){addMaterial(['create-quiz']);}"><a href="#"><i class="pe-7s-target pe-va pe-2x pe-fw"></i> Quiz</a></li>
            [/#if]
            <li role="separator" class="divider"></li>
            <li><h4 class="text-center primaryColor">INTERNET/LINK</h4></li>
            <li class="text-center"><span data-bind="click: function(){addMaterial(['create-youtube']);}">Web page</span>,
                [#if productTypes['youtubevideo']??]
                  <span data-bind="click: function(){addMaterial(['create-youtube']);}">YouTube</span>,
                [/#if]
                [#if productTypes['tedtalk']??]
                  <span data-bind="click: function(){addMaterial(['create-tedtalk']);}" href="#">TED Talks</span>,
                [/#if]
                [#if productTypes['vimeo2video']??]
                  <span data-bind="click: function(){addMaterial(['create-youtube']);}" href="#">Vimeo</span>
                [/#if]
            </li>
            <li role="separator" class="divider"></li>
            <li><h4 class="text-center primaryColor">APPS/INTEGRATIONS</h4></li>
            <li class="text-center"><span>Rebox</span>, <span>Booth</span>, <span>Challenge</span>, <span>Team Invite</span></li>
          </ul>
        </div>
        [/#if]
    </div>
    <h1 class="page-title">Materials</h1>
</section>

<div data-bind="component: { name: 'cocobox-list', params: cocoboxListParams()}"></div>

[/@dws.skin]
