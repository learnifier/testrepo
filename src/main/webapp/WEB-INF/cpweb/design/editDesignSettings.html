[#ftl strip_text="true" /]

[#import "/material/materialsMenu.html" as mMenu /]

[#assign foot]
${cpweb_foot}
<script>
    $('#tm_materials').addClass('activeItem').prev().addClass('prevItem');
    
    var oldExpiration = 0;
    $('#expirationtoggle-false').click(function() {
        oldExpiration = $('#expiration').val();
        $('#expiration').attr({'value': 0, 'disabled': 'disabled'});
    });
   
    $('#expirationtoggle-true').click(function() {
       $('#expiration').attr({'value': oldExpiration}).removeAttr('disabled'); 
    });
    
    
</script>
[/#assign]

[#assign cpweb_ctxMenu]
    [@mMenu.materialsMenu selected="designs"][/@mMenu.materialsMenu]
[/#assign]


[@dws.skin skin="CPAuthMenu2" head=cpweb_head ctxMenu=cpweb_ctxMenu foot=foot orgName=orgName]

<h1>[@dws.txt key="cpweb.editdesignsettings.title" /></h1>
<p>

<div>
    [#global formPrefix="cpweb.editdesignsettings" /]
    <form action="${formLink}" name="newMaterial" class="fullpage" method="post" enctype="multipart/form-data">
        [@mbform.alertsection]
        [/@mbform.alertsection]
        <section class="field clearfix">
            <div class="column">

                <fieldset>

                    [@mbform.inputText name="name" class="input_full"  tabindex="1" /]

                    [@mbform.textarea name="description" tabindex="2" /]
                    
                    [#assign expirationtoggle = "false" /]
                    [#if formsess.getDefaultValue("expiration")??]
                        [#if formsess.getDefaultValue("expiration")?number > 0]
                            [#assign expirationtoggle = "true" /]        
                        [/#if]
                    [/#if]
                    
                    <label>Activate Expiration Timer</label>
                    [@mbform.inputBoolean name="expirationtoggle" label="Expiration toggle" truetext="Yes" falsetext="No" defaultstate=expirationtoggle /]
                    
                    <label>
                    Expiration (Number of days)
                    [@mbform.inputNumber name="expiration" class="input_full"  tabindex="5" value=formsess.getDefaultValue("expiration")!"" /]
                    </label>
                    
                </fieldset>
            </div>
        </section>
        [@mbform.infosection]
        [/@mbform.infosection]
        <section class="action">
            <input type="hidden" name="orgId" value="${org.id}" />
            <button tabindex="100" class="primary save"><span>[@dws.txt key='form.action.savedesignsettings' /></span></button>
            <a href="${helper.urlFor('coursedesign.DesignModule','overview',[org.id, info.designId])}"  tabindex="101">[@dws.txt key="form.action.cancel" /]</a>
        </section>

    </form>
</div>

[/@dws.skin>
