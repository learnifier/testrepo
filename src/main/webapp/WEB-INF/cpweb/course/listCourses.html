[#ftl strip_text="true" /]

[#assign foot]
${cpweb_foot}
<script>
    $('#menu-courses').addClass('active');

    require(["${contextPath}/js/course/listCourses.js?${cycle.application.formattedStartTime.base36String}"], function(s) {
        s.init({
            listCoursesUrl: "${helper.urlFor('course.CourseJsonModule','listOrgCourses',[org.id])}",
            listSessionsUrl: "${helper.urlFor('course.CourseJsonModule','listSessions')}",
            listProjectsUrl: "${helper.urlFor('CpJsonModule','listOrgProjects',[org.id])}",
            newSessionUrl:  "${helper.urlFor('project.NewProjectModule','sessionSetup', [org.id])}",
            newCourseUrl:  "${helper.urlFor('course.CourseModule','createCourse',[org.id])}",
            spinnerUrl: "[@common.spinnerUrl /]",
            courseDetailsUrl: "${helper.urlFor('course.CourseModule','editCourse')}",
            sessionDetailsUrl: "${helper.urlFor('project.ProjectModule','sessionOverview')}",
            projectDetailsUrl: "${helper.urlFor('project.ProjectModule','overview')}",
            deleteSessionUrl: "[@security.permissionBlock permission='CP_DELETE_PROJECT']${helper.urlFor('course.CourseJsonModule','deleteCourse',[org.id])}[/@]"
        });
    });

</script>
[/#assign]

[@dws.skin skin="CPAuth3" head=cpweb_head foot=foot orgName=orgName]

<section class="ccb-page-header margin-bottom">
    <div class="ccb-page-header__actions--right">
        [@portalSecurity.permissionBlock permission="CP_CREATE_PROJECT"]
            <a href="#" class="btn btn-primary" id="addcourse-btn"><span class="glyphicon glyphicon-plus-sign"></span> Add Course</a>
        [/@]
        <a href="${helper.urlFor('CpMainModule', 'listProjects', [org.id])}" class="btn btn-primary">View Projects</a>
    </div>
    <h1 class="page-title">Courses</h1>
</section>

<div class="table-responsive">
    <table class="table table-striped table-hover ccb-table" width="100%" id="listcourses">
        <thead>
        <tr>
            <th></th>
            <th>Course Name</th>
            <th>Sessions</th>
            [@security.permissionBlock permission='CP_DELETE_PROJECT']
            <th></th>
            [/@]
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>
[/@dws.skin]

