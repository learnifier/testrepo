[#ftl /]

[#if session.hasFlashAttribute("creditAllocationFailures") ]

<section class="alert table-responsive">
    <h1>[@dws.txt key="cpweb.project.allocfailure.title" /]</h1>
    <p>[@dws.txt key="cpweb.project.allocfailure.text" /]</p>
        <table class="table table-striped table-hover" width="100%" id="allocfailure">
        <thead>
            <th>Product</th>
            <th>Available credits</th>
            <th>Credits needed</th>
            <th>Difference</th>
        </thead>
        <tbody>
            [#list session.getFlashAttribute("creditAllocationFailures") as creditAllocationFailure ]
            [#assign difference = creditAllocationFailure.availableCredits - creditAllocationFailure.requestedCredits ]
                <tr>
                    <td><span title="${creditAllocationFailure.productName?xhtml}">[@common.trunc str=creditAllocationFailure.productName maxLen=40 /]</span></td>
                    <td class="num">${creditAllocationFailure.availableCredits}</td>
                    <td class="num">${creditAllocationFailure.requestedCredits}</td>
                    <td class="num diff [#if difference < 0] neg[/#if]">${difference}</td>                
                </tr>
            [/#list]
        </tbody>
    </table>
</section>

[/#if]
